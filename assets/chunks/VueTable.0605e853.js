import{d as F,h as p,j as T,o as u,c,k as R,F as w,G as y,r as k,a as _,t as g,_ as V}from"./framework.f15d8f8c.js";const I=s=>{const o=[];for(let t=0;t<s.rows.length;t++){const r=s.rows[t],b=[];for(let f=0;f<r.cells.length;f++)r.cells[f].querySelectorAll('a, button, input, select, textarea, [tabindex]:not([tabindex="-1"])').forEach(m=>{b.push({row:t,column:f,element:m})});o.push(b)}return o},L=s=>{for(const o of s)o.setAttribute("tabindex","-1")};function x(s){const o=s.querySelectorAll('a[href], button, input, select, textarea, [tabindex]:not([tabindex="-1"])');return Array.from(o)}function C(s){for(let o=0;o<s.length;o++)for(let t=0;t<s[o].length;t++){const r=s[o][t];if(r!==null&&r!=="")return r}return null}const N=F({__name:"VueTable",props:{fields:{},items:{}},setup(s){const o=p(),t=p([]),r=p(null);T(()=>{f()});const b=()=>{const e=o.value,a=x(e);L(a),a.forEach(l=>{l.removeEventListener("keydown",m)})},f=()=>{const e=o.value;x(e).length&&(t.value=I(e),t.value.length&&(r.value=C(t.value),h(r.value)))},i={Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown"},v=(e,a,l)=>{let n=e,d=a;switch(console.log(e,a,l.key),l.key){case i.Left:d-=1;break;case i.Right:d+=1;break;case i.Up:n-=1;break;case i.Down:n+=1;break;default:return}if(n>=0&&n<t.value.length&&d>=0&&d<=t.value[n][t.value[n].length-1].column){const E=t.value[n].find(A=>A.column==d);return E||v(n,d,l)}},m=e=>{if(!r.value)return;const{row:a,column:l}=r.value,n=v(a,l,e);n&&(r.value=n,h(n))},h=e=>{console.log("key handler applied",e),b(),e.element.setAttribute("tabindex","0"),e.element.focus(),e.element.addEventListener("keydown",m)};return(e,a)=>(u(),c("table",{ref_key:"vueTableRef",ref:o},[R("tr",null,[(u(!0),c(w,null,y(e.fields,l=>(u(),c("th",null,[k(e.$slots,`header(${l.key})`,{data:l,header:l.key},()=>[_(g(l.value),1)],!0)]))),256))]),(u(!0),c(w,null,y(e.items,l=>(u(),c("tr",null,[(u(!0),c(w,null,y(e.fields,n=>(u(),c("td",null,[k(e.$slots,`cell(${n.key})`,{data:l[n.key],item:l},()=>[_(g(l[n.key]),1)],!0)]))),256))]))),256)),k(e.$slots,"tfooter",{},void 0,!0)],512))}});const $=V(N,[["__scopeId","data-v-9239a8d9"]]);export{$ as V};
